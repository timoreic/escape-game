var r1c1 = document.getElementById('r1c1');
var r1c2 = document.getElementById('r1c2');
var r1c3 = document.getElementById('r1c3');
var r1c4 = document.getElementById('r1c4');
var r1c5 = document.getElementById('r1c5');
var r1c6 = document.getElementById('r1c6');
var r1c7 = document.getElementById('r1c7');
var r1c8 = document.getElementById('r1c8');
var r1c9 = document.getElementById('r1c9');
var r1c10 = document.getElementById('r1c10');
var r2c1 = document.getElementById('r2c1');
var r2c2 = document.getElementById('r2c2');
var r2c3 = document.getElementById('r2c3');
var r2c4 = document.getElementById('r2c4');
var r2c5 = document.getElementById('r2c5');
var r2c6 = document.getElementById('r2c6');
var r2c7 = document.getElementById('r2c7');
var r2c8 = document.getElementById('r2c8');
var r2c9 = document.getElementById('r2c9');
var r2c10 = document.getElementById('r2c10');
var r3c1 = document.getElementById('r3c1');
var r3c2 = document.getElementById('r3c2');
var r3c3 = document.getElementById('r3c3');
var r3c4 = document.getElementById('r3c4');
var r3c5 = document.getElementById('r3c5');
var r3c6 = document.getElementById('r3c6');
var r3c7 = document.getElementById('r3c7');
var r3c8 = document.getElementById('r3c8');
var r3c9 = document.getElementById('r3c9');
var r3c10 = document.getElementById('r3c10');
var r4c1 = document.getElementById('r4c1');
var r4c2 = document.getElementById('r4c2');
var r4c3 = document.getElementById('r4c3');
var r4c4 = document.getElementById('r4c4');
var r4c5 = document.getElementById('r4c5');
var r4c6 = document.getElementById('r4c6');
var r4c7 = document.getElementById('r4c7');
var r4c8 = document.getElementById('r4c8');
var r4c9 = document.getElementById('r4c9');
var r4c10 = document.getElementById('r4c10');
var r5c1 = document.getElementById('r5c1');
var r5c2 = document.getElementById('r5c2');
var r5c3 = document.getElementById('r5c3');
var r5c4 = document.getElementById('r5c4');
var r5c5 = document.getElementById('r5c5');
var r5c6 = document.getElementById('r5c6');
var r5c7 = document.getElementById('r5c7');
var r5c8 = document.getElementById('r5c8');
var r5c9 = document.getElementById('r5c9');
var r5c10 = document.getElementById('r5c10');
var r6c1 = document.getElementById('r6c1');
var r6c2 = document.getElementById('r6c2');
var r6c3 = document.getElementById('r6c3');
var r6c4 = document.getElementById('r6c4');
var r6c5 = document.getElementById('r6c5');
var r6c6 = document.getElementById('r6c6');
var r6c7 = document.getElementById('r6c7');
var r6c8 = document.getElementById('r6c8');
var r6c9 = document.getElementById('r6c9');
var r6c10 = document.getElementById('r6c10');
var r7c1 = document.getElementById('r7c1');
var r7c2 = document.getElementById('r7c2');
var r7c3 = document.getElementById('r7c3');
var r7c4 = document.getElementById('r7c4');
var r7c5 = document.getElementById('r7c5');
var r7c6 = document.getElementById('r7c6');
var r7c7 = document.getElementById('r7c7');
var r7c8 = document.getElementById('r7c8');
var r7c9 = document.getElementById('r7c9');
var r7c10 = document.getElementById('r7c10');
var r8c1 = document.getElementById('r8c1');
var r8c2 = document.getElementById('r8c2');
var r8c3 = document.getElementById('r8c3');
var r8c4 = document.getElementById('r8c4');
var r8c5 = document.getElementById('r8c5');
var r8c6 = document.getElementById('r8c6');
var r8c7 = document.getElementById('r8c7');
var r8c8 = document.getElementById('r8c8');
var r8c9 = document.getElementById('r8c9');
var r8c10 = document.getElementById('r8c10');
var r9c1 = document.getElementById('r9c1');
var r9c2 = document.getElementById('r9c2');
var r9c3 = document.getElementById('r9c3');
var r9c4 = document.getElementById('r9c4');
var r9c5 = document.getElementById('r9c5');
var r9c6 = document.getElementById('r9c6');
var r9c7 = document.getElementById('r9c7');
var r9c8 = document.getElementById('r9c8');
var r9c9 = document.getElementById('r9c9');
var r9c10 = document.getElementById('r9c10');
var r10c1 = document.getElementById('r10c1');
var r10c2 = document.getElementById('r10c2');
var r10c3 = document.getElementById('r10c3');
var r10c4 = document.getElementById('r10c4');
var r10c5 = document.getElementById('r10c5');
var r10c6 = document.getElementById('r10c6');
var r10c7 = document.getElementById('r10c7');
var r10c8 = document.getElementById('r10c8');
var r10c9 = document.getElementById('r10c9');
var r10c10 = document.getElementById('r10c10');
var gameField = document.getElementById('gameField');
var field = [
  [r1c1, r1c2, r1c3, r1c4, r1c5, r1c6, r1c7, r1c8, r1c9, r1c10],
  [r2c1, r2c2, r2c3, r2c4, r2c5, r2c6, r2c7, r2c8, r2c9, r2c10],
  [r3c1, r3c2, r3c3, r3c4, r3c5, r3c6, r3c7, r3c8, r3c9, r3c10],
  [r4c1, r4c2, r4c3, r4c4, r4c5, r4c6, r4c7, r4c8, r4c9, r4c10],
  [r5c1, r5c2, r5c3, r5c4, r5c5, r5c6, r5c7, r5c8, r5c9, r5c10],
  [r6c1, r6c2, r6c3, r6c4, r6c5, r6c6, r6c7, r6c8, r6c9, r6c10],
  [r7c1, r7c2, r7c3, r7c4, r7c5, r7c6, r7c7, r7c8, r7c9, r7c10],
  [r8c1, r8c2, r8c3, r8c4, r8c5, r8c6, r8c7, r8c8, r8c9, r8c10],
  [r9c1, r9c2, r9c3, r9c4, r9c5, r9c6, r9c7, r9c8, r9c9, r9c10],
  [r10c1, r10c2, r10c3, r10c4, r10c5, r10c6, r10c7, r10c8, r10c9, r10c10],
];

var player;
var playerCol;
var playerRow;
var exit;
var exitCol;
var exitRow;
var robot1;
var robot1Col;
var robot1Row;
var robot2;
var robot2Col;
var robot2Row;
var robot3;
var robot3Col;
var robot3Row;

var difficultyContainer = document.getElementById('difficultyContainer');
var mainContainer = document.getElementById('mainContainer');
var endContainer = document.getElementById('endContainer');
var moveCount = document.getElementById('moveCount');
var turnCount = document.getElementById('turnCount');
var endMessage = document.getElementById('endMessage');
var difficulty;
var spotlightsOn = false;

function startGame() {
  difficultyContainer.style.visibility = 'hidden';
  mainContainer.style.visibility = 'visible';
  determineDifficulty();
  placePlayer();
  placeExit();
  placeRobots();
}

function determineDifficulty() {
  difficultySelector = document.getElementById('difficulty');
  difficulty =
    difficultySelector.options[difficultySelector.selectedIndex].value;
}

function placePlayer() {
  var rand = Math.floor(Math.random() * 10);
  player = field[9][rand];
  playerCol = 9;
  playerRow = rand;
  player.style.backgroundColor = 'blue';
}

function placeExit() {
  var rand = Math.floor(Math.random() * 10);
  exit = field[0][rand];
  exitCol = 0;
  exitRow = rand;
  exit.style.backgroundColor = 'green';
}

function placeRobots() {
  if (difficulty === '0') {
    return;
  }
  if (difficulty === '1') {
    placeRobot1();
  }
  if (difficulty === '2') {
    placeRobot1();
    placeRobot2();
  }
  if (difficulty === '3') {
    placeRobot1();
    placeRobot2();
    placeRobot3();
  }
}

function placeRobot1() {
  robot1Placed = false;
  while (!robot1Placed) {
    var rand1 = Math.floor(Math.random() * 10);
    var rand2 = Math.floor(Math.random() * 10);
    robot1 = field[rand1][rand2];
    robot1Col = rand1;
    robot1Row = rand2;
    if (robot1 != player && robot1 != exit) {
      robot1.style.background = 'red';
      robot1Placed = true;
    }
  }
}

function placeRobot2() {
  robot2Placed = false;
  while (!robot2Placed) {
    var rand1 = Math.floor(Math.random() * 10);
    var rand2 = Math.floor(Math.random() * 10);
    robot2 = field[rand1][rand2];
    robot2Col = rand1;
    robot2Row = rand2;
    if (robot2 != player && robot2 != exit && robot2 != robot1) {
      robot2.style.background = 'red';
      robot2Placed = true;
    }
  }
}

function placeRobot3() {
  robot3Placed = false;
  while (!robot3Placed) {
    var rand1 = Math.floor(Math.random() * 10);
    var rand2 = Math.floor(Math.random() * 10);
    robot3 = field[rand1][rand2];
    robot3Col = rand1;
    robot3Row = rand2;
    if (
      robot3 != player &&
      robot3 != exit &&
      robot3 != robot1 &&
      robot3 != robot2
    ) {
      robot3.style.background = 'red';
      robot3Placed = true;
    }
  }
}

function rollDie() {
  var dieValue = Math.floor(Math.random() * 6) + 1;
  moveCount.innerHTML = dieValue;
  if (spotlightsOn) {
    unshineSpotlights();
    spotlightsOn = false;
  }
}

function handleClick(evt) {
  if (moveCount.innerHTML != '0') {
    if (gameField.contains(evt.target)) {
      for (c = 0; c < field.length; c++) {
        for (r = 0; r < field.length; r++) {
          if (field[c][r] === evt.target) {
            var cStr = c.toString();
            var rStr = r.toString();
            var newPlayerCol = c;
            var newPlayerRow = r;
            var clickedField = cStr + rStr;
          }
        }
      }
      var legalFields = getLegalFields();
      for (i = 0; i < legalFields.length; i++) {
        if (legalFields[i] === clickedField) {
          movePlayer(newPlayerCol, newPlayerRow);
          if (moveCount.innerHTML === '0' && difficulty != '0') {
            moveRobots();
            shineSpotlights();
            spotlightsOn = true;
            currentTurnCount = parseFloat(turnCount.innerHTML);
            turnCount.innerHTML = currentTurnCount + 1;
          }
        }
      }
    }
  }
}

function unshineSpotlights() {
  if (difficulty === '0') {
    return;
  }
  if (difficulty === '1') {
    unshineRobot1();
  }
  if (difficulty === '2') {
    unshineRobot1();
    unshineRobot2();
  }
  if (difficulty === '3') {
    unshineRobot1();
    unshineRobot2();
    unshineRobot3();
  }
}

function unshineRobot1() {
  if (difficulty === '1') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot1Col][i] != field[exitCol][exitRow] &&
        field[robot1Col][i] != field[robot1Col][robot1Row]
      ) {
        field[robot1Col][i].style.backgroundColor = 'white';
      }
      if (
        field[i][robot1Row] != field[exitCol][exitRow] &&
        field[i][robot1Row] != field[robot1Col][robot1Row]
      ) {
        field[i][robot1Row].style.backgroundColor = 'white';
      }
    }
  }
  if (difficulty === '2') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot1Col][i] != field[exitCol][exitRow] &&
        field[robot1Col][i] != field[robot1Col][robot1Row] &&
        field[robot1Col][i] != field[robot2Col][robot2Row]
      ) {
        field[robot1Col][i].style.backgroundColor = 'white';
      }
      if (
        field[i][robot1Row] != field[exitCol][exitRow] &&
        field[i][robot1Row] != field[robot1Col][robot1Row] &&
        field[i][robot1Row] != field[robot2Col][robot2Row]
      ) {
        field[i][robot1Row].style.backgroundColor = 'white';
      }
    }
  }
  if (difficulty === '3') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot1Col][i] != field[exitCol][exitRow] &&
        field[robot1Col][i] != field[robot1Col][robot1Row] &&
        field[robot1Col][i] != field[robot2Col][robot2Row] &&
        field[robot1Col][i] != field[robot3Col][robot3Row]
      ) {
        field[robot1Col][i].style.backgroundColor = 'white';
      }
      if (
        field[i][robot1Row] != field[exitCol][exitRow] &&
        field[i][robot1Row] != field[robot1Col][robot1Row] &&
        field[i][robot1Row] != field[robot2Col][robot2Row] &&
        field[i][robot1Row] != field[robot3Col][robot3Row]
      ) {
        field[i][robot1Row].style.backgroundColor = 'white';
      }
    }
  }
}

function unshineRobot2() {
  if (difficulty === '2') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot2Col][i] != field[exitCol][exitRow] &&
        field[robot2Col][i] != field[robot1Col][robot1Row] &&
        field[robot2Col][i] != field[robot2Col][robot2Row]
      ) {
        field[robot2Col][i].style.backgroundColor = 'white';
      }
      if (
        field[i][robot2Row] != field[exitCol][exitRow] &&
        field[i][robot2Row] != field[robot1Col][robot1Row] &&
        field[i][robot2Row] != field[robot2Col][robot2Row]
      ) {
        field[i][robot2Row].style.backgroundColor = 'white';
      }
    }
  }
  if (difficulty === '3') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot2Col][i] != field[exitCol][exitRow] &&
        field[robot2Col][i] != field[robot1Col][robot1Row] &&
        field[robot2Col][i] != field[robot2Col][robot2Row] &&
        field[robot2Col][i] != field[robot3Col][robot3Row]
      ) {
        field[robot2Col][i].style.backgroundColor = 'white';
      }
      if (
        field[i][robot2Row] != field[exitCol][exitRow] &&
        field[i][robot2Row] != field[robot1Col][robot1Row] &&
        field[i][robot2Row] != field[robot2Col][robot2Row] &&
        field[i][robot2Row] != field[robot3Col][robot3Row]
      ) {
        field[i][robot2Row].style.backgroundColor = 'white';
      }
    }
  }
}

function unshineRobot3() {
  if (difficulty === '3') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot3Col][i] != field[exitCol][exitRow] &&
        field[robot3Col][i] != field[robot1Col][robot1Row] &&
        field[robot3Col][i] != field[robot2Col][robot2Row] &&
        field[robot3Col][i] != field[robot3Col][robot3Row]
      ) {
        field[robot3Col][i].style.backgroundColor = 'white';
      }
      if (
        field[i][robot3Row] != field[exitCol][exitRow] &&
        field[i][robot3Row] != field[robot1Col][robot1Row] &&
        field[i][robot3Row] != field[robot2Col][robot2Row] &&
        field[i][robot3Row] != field[robot3Col][robot3Row]
      ) {
        field[i][robot3Row].style.backgroundColor = 'white';
      }
    }
  }
}

function shineSpotlights() {
  if (difficulty === '1') {
    shineRobot1();
  }
  if (difficulty === '2') {
    shineRobot1();
    shineRobot2();
  }
  if (difficulty === '3') {
    shineRobot1();
    shineRobot2();
    shineRobot3();
  }
}

function shineRobot1() {
  if (difficulty === '1') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot1Col][i] != field[exitCol][exitRow] &&
        field[robot1Col][i] != field[robot1Col][robot1Row] &&
        field[robot1Col][i] != field[playerCol][playerRow]
      ) {
        field[robot1Col][i].style.backgroundColor = 'yellow';
      }
      if (
        field[i][robot1Row] != field[exitCol][exitRow] &&
        field[i][robot1Row] != field[robot1Col][robot1Row] &&
        field[i][robot1Row] != field[playerCol][playerRow]
      ) {
        field[i][robot1Row].style.backgroundColor = 'yellow';
      }
      if (
        field[robot1Col][i] === field[playerCol][playerRow] ||
        field[i][robot1Row] === field[playerCol][playerRow]
      ) {
        gameOver('lost');
      }
    }
  }
  if (difficulty === '2') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot1Col][i] != field[exitCol][exitRow] &&
        field[robot1Col][i] != field[robot1Col][robot1Row] &&
        field[robot1Col][i] != field[robot2Col][robot2Row] &&
        field[robot1Col][i] != field[playerCol][playerRow]
      ) {
        field[robot1Col][i].style.backgroundColor = 'yellow';
      }
      if (
        field[i][robot1Row] != field[exitCol][exitRow] &&
        field[i][robot1Row] != field[robot1Col][robot1Row] &&
        field[i][robot1Row] != field[robot2Col][robot2Row] &&
        field[i][robot1Row] != field[playerCol][playerRow]
      ) {
        field[i][robot1Row].style.backgroundColor = 'yellow';
      }
      if (
        field[robot1Col][i] === field[playerCol][playerRow] ||
        field[i][robot1Row] === field[playerCol][playerRow]
      ) {
        gameOver('lost');
      }
    }
  }
  if (difficulty === '3') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot1Col][i] != field[exitCol][exitRow] &&
        field[robot1Col][i] != field[robot1Col][robot1Row] &&
        field[robot1Col][i] != field[robot2Col][robot2Row] &&
        field[robot1Col][i] != field[robot3Col][robot3Row] &&
        field[robot1Col][i] != field[playerCol][playerRow]
      ) {
        field[robot1Col][i].style.backgroundColor = 'yellow';
      }
      if (
        field[i][robot1Row] != field[exitCol][exitRow] &&
        field[i][robot1Row] != field[robot1Col][robot1Row] &&
        field[i][robot1Row] != field[robot2Col][robot2Row] &&
        field[i][robot1Row] != field[robot3Col][robot3Row] &&
        field[i][robot1Row] != field[playerCol][playerRow]
      ) {
        field[i][robot1Row].style.backgroundColor = 'yellow';
      }
      if (
        field[robot1Col][i] === field[playerCol][playerRow] ||
        field[i][robot1Row] === field[playerCol][playerRow]
      ) {
        gameOver('lost');
      }
    }
  }
}

function shineRobot2() {
  if (difficulty === '2') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot2Col][i] != field[exitCol][exitRow] &&
        field[robot2Col][i] != field[robot1Col][robot1Row] &&
        field[robot2Col][i] != field[robot2Col][robot2Row] &&
        field[robot2Col][i] != field[playerCol][playerRow]
      ) {
        field[robot2Col][i].style.backgroundColor = 'yellow';
      }
      if (
        field[i][robot2Row] != field[exitCol][exitRow] &&
        field[i][robot2Row] != field[robot1Col][robot1Row] &&
        field[i][robot2Row] != field[robot2Col][robot2Row] &&
        field[i][robot2Row] != field[playerCol][playerRow]
      ) {
        field[i][robot2Row].style.backgroundColor = 'yellow';
      }
      if (
        field[robot2Col][i] === field[playerCol][playerRow] ||
        field[i][robot2Row] === field[playerCol][playerRow]
      ) {
        gameOver('lost');
      }
    }
  }
  if (difficulty === '3') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot2Col][i] != field[exitCol][exitRow] &&
        field[robot2Col][i] != field[robot1Col][robot1Row] &&
        field[robot2Col][i] != field[robot2Col][robot2Row] &&
        field[robot2Col][i] != field[robot3Col][robot3Row] &&
        field[robot2Col][i] != field[playerCol][playerRow]
      ) {
        field[robot2Col][i].style.backgroundColor = 'yellow';
      }
      if (
        field[i][robot2Row] != field[exitCol][exitRow] &&
        field[i][robot2Row] != field[robot1Col][robot1Row] &&
        field[i][robot2Row] != field[robot2Col][robot2Row] &&
        field[i][robot2Row] != field[robot3Col][robot3Row] &&
        field[i][robot2Row] != field[playerCol][playerRow]
      ) {
        field[i][robot2Row].style.backgroundColor = 'yellow';
      }
      if (
        field[robot2Col][i] === field[playerCol][playerRow] ||
        field[i][robot2Row] === field[playerCol][playerRow]
      ) {
        gameOver('lost');
      }
    }
  }
}

function shineRobot3() {
  if (difficulty === '3') {
    for (i = 0; i < field.length; i++) {
      if (
        field[robot3Col][i] != field[exitCol][exitRow] &&
        field[robot3Col][i] != field[robot1Col][robot1Row] &&
        field[robot3Col][i] != field[robot2Col][robot2Row] &&
        field[robot3Col][i] != field[robot3Col][robot3Row] &&
        field[robot3Col][i] != field[playerCol][playerRow]
      ) {
        field[robot3Col][i].style.backgroundColor = 'yellow';
      }
      if (
        field[i][robot3Row] != field[exitCol][exitRow] &&
        field[i][robot3Row] != field[robot1Col][robot1Row] &&
        field[i][robot3Row] != field[robot2Col][robot2Row] &&
        field[i][robot3Row] != field[robot3Col][robot3Row] &&
        field[i][robot3Row] != field[playerCol][playerRow]
      ) {
        field[i][robot3Row].style.backgroundColor = 'yellow';
      }
      if (
        field[robot3Col][i] === field[playerCol][playerRow] ||
        field[i][robot3Row] === field[playerCol][playerRow]
      ) {
        gameOver('lost');
      }
    }
  }
}

function gameOver(status) {
  if (status === 'won') {
    endContainer.style.visibility = 'visible';
  }
  if (status === 'lost') {
    endMessage.innerHTML = 'You were caught.';
    endContainer.style.visibility = 'visible';
  }
}

function moveRobots() {
  if (difficulty === '0') {
    return;
  }
  if (difficulty === '1') {
    moveRobot1();
  }
  if (difficulty === '2') {
    moveRobot1();
    moveRobot2();
  }
  if (difficulty === '3') {
    moveRobot1();
    moveRobot2();
    moveRobot3();
  }
}

function moveRobot1() {
  var newRobot1Col = robot1Col;
  var newRobot1Row = robot1Row;
  if (robot1Col > playerCol) {
    var newRobot1Col = robot1Col - 1;
  }
  if (robot1Col < playerCol) {
    var newRobot1Col = robot1Col + 1;
  }
  if (robot1Row > playerRow) {
    var newRobot1Row = robot1Row - 1;
  }
  if (robot1Row < playerRow) {
    var newRobot1Row = robot1Row + 1;
  }
  var newRobot1FieldStr = newRobot1Col.toString() + newRobot1Row.toString();
  var exitFieldStr = exitCol.toString() + exitRow.toString();
  var robot2FieldStr;
  var robot3FieldStr;
  if (difficulty === '2') {
    robot2FieldStr = robot2Col.toString() + robot2Row.toString();
  }
  if (difficulty === '3') {
    robot2FieldStr = robot2Col.toString() + robot2Row.toString();
    robot3FieldStr = robot3Col.toString() + robot3Row.toString();
  }
  if (
    newRobot1FieldStr != exitFieldStr &&
    newRobot1FieldStr != robot2FieldStr &&
    newRobot1FieldStr != robot3FieldStr
  ) {
  }
  field[newRobot1Col][newRobot1Row].style.backgroundColor = 'red';
  field[robot1Col][robot1Row].style.backgroundColor = 'white';
  robot1Col = newRobot1Col;
  robot1Row = newRobot1Row;

  if (robot1Col === playerCol && robot1Row === playerRow) {
    gameOver('lost');
  }
}

function moveRobot2() {
  var newRobot2Col = robot2Col;
  var newRobot2Row = robot2Row;
  if (robot2Col > playerCol) {
    var newRobot2Col = robot2Col - 1;
  }
  if (robot2Col < playerCol) {
    var newRobot2Col = robot2Col + 1;
  }
  if (robot2Row > playerRow) {
    var newRobot2Row = robot2Row - 1;
  }
  if (robot2Row < playerRow) {
    var newRobot2Row = robot2Row + 1;
  }
  var newRobot2FieldStr = newRobot2Col.toString() + newRobot2Row.toString();
  var exitFieldStr = exitCol.toString() + exitRow.toString();
  var robot1FieldStr;
  var robot3FieldStr;
  if (difficulty === '2') {
    robot1FieldStr = robot1Col.toString() + robot1Row.toString();
  }
  if (difficulty === '3') {
    robot1FieldStr = robot1Col.toString() + robot1Row.toString();
    robot3FieldStr = robot3Col.toString() + robot3Row.toString();
  }
  if (
    newRobot2FieldStr != exitFieldStr &&
    newRobot2FieldStr != robot1FieldStr &&
    newRobot2FieldStr != robot3FieldStr
  ) {
  }
  field[newRobot2Col][newRobot2Row].style.backgroundColor = 'red';
  field[robot2Col][robot2Row].style.backgroundColor = 'white';
  robot2Col = newRobot2Col;
  robot2Row = newRobot2Row;
  if (robot2Col === playerCol && robot2Row === playerRow) {
    gameOver('lost');
  }
}

function moveRobot3() {
  var newRobot3Col = robot3Col;
  var newRobot3Row = robot3Row;
  if (robot3Col > playerCol) {
    var newRobot3Col = robot3Col - 1;
  }
  if (robot3Col < playerCol) {
    var newRobot3Col = robot3Col + 1;
  }
  if (robot3Row > playerRow) {
    var newRobot3Row = robot3Row - 1;
  }
  if (robot3Row < playerRow) {
    var newRobot3Row = robot3Row + 1;
  }
  var newRobot3FieldStr = newRobot3Col.toString() + newRobot3Row.toString();
  var exitFieldStr = exitCol.toString() + exitRow.toString();
  var robot1FieldStr = robot1Col.toString() + robot1Row.toString();
  var robot2FieldStr = robot2Col.toString() + robot2Row.toString();

  if (
    newRobot3FieldStr != exitFieldStr &&
    newRobot3FieldStr != robot1FieldStr &&
    newRobot3FieldStr != robot2FieldStr
  ) {
  }
  field[newRobot3Col][newRobot3Row].style.backgroundColor = 'red';
  field[robot3Col][robot3Row].style.backgroundColor = 'white';
  robot3Col = newRobot3Col;
  robot3Row = newRobot3Row;
  if (robot3Col === playerCol && robot3Row === playerRow) {
    gameOver('lost');
  }
}

function movePlayer(newCol, newRow) {
  var newFieldStr = newCol.toString() + newRow.toString();
  var exitFieldStr = exitCol.toString() + exitRow.toString();
  if (newFieldStr != exitFieldStr) {
    field[newCol][newRow].style.backgroundColor = 'blue';
  }
  field[playerCol][playerRow].style.backgroundColor = 'white';
  playerCol = newCol;
  playerRow = newRow;
  currentMoveCount = parseFloat(moveCount.innerHTML);
  moveCount.innerHTML = currentMoveCount - 1;
  if (exitCol === playerCol && exitRow === playerRow) {
    gameOver('won');
  }
}

function getLegalFields() {
  var legalFields = new Array();
  if (difficulty === '1') {
    robot1FieldStr = robot1Col.toString() + robot1Row.toString();
  }
  if (difficulty === '2') {
    robot1FieldStr = robot1Col.toString() + robot1Row.toString();
    robot2FieldStr = robot2Col.toString() + robot2Row.toString();
  }
  if (difficulty === '3') {
    robot1FieldStr = robot1Col.toString() + robot1Row.toString();
    robot2FieldStr = robot2Col.toString() + robot2Row.toString();
    robot3FieldStr = robot3Col.toString() + robot3Row.toString();
  }

  if (playerCol + 1 <= 9) {
    colNum = playerCol + 1;
    colStr = colNum.toString();
    rowStr = playerRow.toString();
    possibleFieldStr = colStr + rowStr;
    if (difficulty === '0') {
      legalFields.push(possibleFieldStr);
    }
    if (difficulty === '1') {
      if (possibleFieldStr != robot1FieldStr) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '2') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '3') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr &&
        possibleFieldStr != robot3FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
  }
  if (playerCol - 1 >= 0) {
    colNum = playerCol - 1;
    colStr = colNum.toString();
    rowStr = playerRow.toString();
    possibleFieldStr = colStr + rowStr;
    if (difficulty === '0') {
      legalFields.push(possibleFieldStr);
    }
    if (difficulty === '1') {
      if (possibleFieldStr != robot1FieldStr) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '2') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '3') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr &&
        possibleFieldStr != robot3FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
  }
  if (playerRow + 1 <= 9) {
    rowNum = playerRow + 1;
    rowStr = rowNum.toString();
    colStr = playerCol.toString();
    possibleFieldStr = colStr + rowStr;
    if (difficulty === '0') {
      legalFields.push(possibleFieldStr);
    }
    if (difficulty === '1') {
      if (possibleFieldStr != robot1FieldStr) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '2') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '3') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr &&
        possibleFieldStr != robot3FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
  }
  if (playerRow - 1 >= 0) {
    rowNum = playerRow - 1;
    rowStr = rowNum.toString();
    colStr = playerCol.toString();
    possibleFieldStr = colStr + rowStr;
    if (difficulty === '0') {
      legalFields.push(possibleFieldStr);
    }
    if (difficulty === '1') {
      if (possibleFieldStr != robot1FieldStr) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '2') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
    if (difficulty === '3') {
      if (
        possibleFieldStr != robot1FieldStr &&
        possibleFieldStr != robot2FieldStr &&
        possibleFieldStr != robot3FieldStr
      ) {
        legalFields.push(possibleFieldStr);
      }
    }
  }
  return legalFields;
}

document
  .getElementById('startButton')
  .addEventListener('click', startGame, false);

document
  .getElementById('rollDieButton')
  .addEventListener('click', rollDie, false);

document.addEventListener('click', handleClick, false);
